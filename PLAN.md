# Zello Java SDK Project Plan

### I. Zello SDK for Java (Targeting Java 21)

This SDK will provide a modern, pure Java, standalone solution for integrating with Zello and ZelloWork channels. By targeting **Java 21**, it will leverage the latest language features and performance enhancements. It will support custom PTT, Vox, and external audio sources, making it ideal for radio-to-Zello audio bridging applications.

#### 1. Core Concepts

The SDK will be built around the following core concepts:

*   **WebSocket Communication:** All communication with the Zello server is handled over a secure WebSocket connection.
*   **JSON Control Protocol:** Commands and events are sent and received as JSON-formatted text messages.
*   **Binary Audio Streaming:** Voice data is sent and received as binary messages using the Opus codec.
*   **Event-Driven Architecture:** The SDK will use an event-driven model to notify the application of events such as incoming voice messages, channel status changes, and errors.

#### 2. Key Features

*   **Built for Java 21:** The SDK will be developed and compiled using Java 21 to take advantage of the latest features, including virtual threads (Project Loom) for highly concurrent I/O operations.
*   **Reduced Boilerplate with Lombok:** **Project Lombok** will be used to automatically generate getters, setters, constructors, `toString()`, `equals()`, and `hashCode()` methods, keeping the model and data classes clean and concise.
*   **Builder Pattern for Object Creation:** Complex objects, such as the main `ZelloChannel` configuration, will be constructed using the **Builder design pattern**, powered by Lombok's `@Builder` annotation. This provides a fluent, readable, and extensible API for object instantiation.
*   **Zello and ZelloWork Support:** The SDK will support connecting to both Zello and ZelloWork channels.
*   **Opus Codec Integration:** The SDK will include a pure Java Opus library to handle audio encoding and decoding.
*   **Custom PTT and Vox:** The SDK will provide methods to start and stop audio streaming.
*   **Configurable Audio I/O:** Audio input and output devices can be configured through a properties file.
*   **Real-time Audio Management:** The SDK will incorporate buffering and low-latency processing.
*   **No Native Libraries:** The SDK will be a pure Java solution.
*   **Flexible Logging:** The SDK will use the **SLF4J API** for logging.

#### 3. High-Level Architecture

The SDK will consist of the following main components:

*   **Package Structure:** All classes and resources for the SDK will reside under the base package `com.charles.eakins`. For example: `com.charles.eakins.zello.sdk.ZelloChannel`.
*   **`ZelloChannel`:** The main class for interacting with a Zello channel. Its setup and configuration will be managed via a builder.
*   **`ZelloChannelListener`:** An interface that the application can implement to receive events.
*   **Data Objects:** Models for JSON commands and events (e.g., `Auth`, `OnStreamStart`, `OnTextMessage`) will be plain old Java objects (POJOs) with boilerplate code generated by Lombok annotations.
*   **`AudioEngine`:** A component responsible for audio handling.
*   **`Configuration`:** A class for loading and managing configuration settings.

### II. Maven Build Files

A `pom.xml` file will be created to manage the project's coordinates, dependencies, build process, and packaging.

#### 1. Maven Coordinates

The project will be identified with the following Maven coordinates in the `pom.xml`:

```xml
<groupId>com.charles.eakins</groupId>
<artifactId>zello-channel-sdk</artifactId>
<version>1.0.0-SNAPSHOT</version>
```

#### 2. Dependencies

The `pom.xml` will include the following dependencies:

*   **Project Lombok (`lombok`):** To reduce boilerplate code, with a `provided` scope.
*   **Java-WebSocket:** For WebSocket communication.
*   **JSON-java:** For parsing and creating JSON messages.
*   **JOpus:** A pure Java implementation of the Opus codec.
*   **SLF4J API (`slf4j-api`):** To provide a logging facade.
*   **TestNG:** For unit and integration testing.
*   **Mockito:** For mocking objects in tests.
*   **Logback (`logback-classic`):** To be used in the `test` scope.

#### 3. Build Plugins

The `pom.xml` will be configured with the following Maven plugins:

*   **`maven-compiler-plugin`:** Configured to use **Java 21** and integrate with **Lombok**.
*   **`maven-surefire-plugin`:** To run the TestNG tests.
*   **`maven-jar-plugin`:** To package the SDK as a standard JAR file.
*   **`maven-assembly-plugin`:** To create a standalone JAR file with all dependencies.
*   **`maven-source-plugin`:** To package the source code for distribution.
*   **`maven-javadoc-plugin`:** To generate Javadoc documentation.

### III. Testing

A comprehensive test suite will be developed using **TestNG** to ensure quality. All test classes will also reside under the `com.charles.eakins` package structure.

#### 1. Unit Tests

Unit tests will be created for each component of the SDK, using TestNG assertions and Mockito to isolate and test individual units of code.

#### 2. Integration Tests

Integration tests will be developed to test the end-to-end functionality of the SDK by connecting to a live Zello channel.

### IV. GitHub Build and Maven Central Deployment

#### 1. GitHub Actions Workflow

A GitHub Actions workflow will be created to automate the build, test, and deployment process using a **JDK 21** environment.

#### 2. Maven Central Deployment

1.  **Create a Sonatype JIRA Account:** To request permission to publish artifacts under the `com.charles.eakins` group ID. You will need to prove ownership of a domain associated with it (like `eakins.charles.com`) or use a public repository like GitHub.
2.  **Configure GPG Signing:** To sign the artifacts before deploying.
3.  **Configure `pom.xml` for Deployment:** To add SCM, license, and developer information.
4.  **Configure GitHub Secrets:** To securely store the Sonatype credentials and GPG passphrase.
5.  **Create a Release on GitHub:** To trigger the deployment workflow.
